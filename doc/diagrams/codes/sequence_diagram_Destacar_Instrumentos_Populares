title Destacar Instrumentos Populares

actor Usu치rio

participant Flask
participant SubPackageFeaturing
participant data.business.SubPackageInstruments
participant SubPackageAnnouncements
participant SQLAlchemy

Usu치rio->Flask: POST /destacar-instrumentos?selecionados=<list>
Flask->SubPackageFeaturing: saveNew10PopularIntruments(list)
SubPackageFeaturing->data.business.SubPackageInstruments: get_all_instruments()
data.business.SubPackageInstruments->SQLAlchemy: query(Instruments).all()
data.business.SubPackageInstruments<--SQLAlchemy: list<instruments>
SubPackageFeaturing<--data.business.SubPackageInstruments: list<instruments>
alt list is in instruments
    loop instrument in list
    SubPackageFeaturing->data.business.SubPackageInstruments: upsert(instrument)
    data.business.SubPackageInstruments->SQLAlchemy: add(instrument)
    data.business.SubPackageInstruments<--SQLAlchemy: instrument
    end
    Flask<--SubPackageFeaturing: list<instruments>
    Flask->Flask: HTTP redirects to GET /destacar-instrumentos
    Flask->data.business.SubPackageInstruments: get_all_instruments()
    data.business.SubPackageInstruments->SQLAlchemy: query(Instruments).all()
    data.business.SubPackageInstruments<--SQLAlchemy: list<instruments>
    Flask<--data.business.SubPackageInstruments: list<instruments>
    Usu치rio<--Flask: HTTP response with all the instruments including popular
else 
    Flask<--SubPackageFeaturing: Exception()
    Usu치rio<--Flask: "Invalid new popular intrument."
end